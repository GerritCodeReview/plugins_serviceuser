{
  "comments": [
    {
      "key": {
        "uuid": "9efc9ac6_e4fd9a80",
        "filename": "BUCK",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-06-25T16:09:11Z",
      "side": 1,
      "message": "provided_deps\n\nWhat about standalone build mode?",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "5981cc6bdb79efd105f62c99a16f4d080e3bea64",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be423edc_bdda3f10",
        "filename": "BUCK",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1012155
      },
      "writtenOn": "2015-06-25T16:41:46Z",
      "side": 1,
      "message": "\u003e provided_deps\n\nThanks.\nDone in PS3.\n\n\u003e What about standalone build mode?\n\nFor plugins that require further libraries, I find standalone\nbuild mode problematic, as one has to keep library\ndefinitions in sync with gerrit core.\n\nThat\u0027s tedious, and as we\u0027re human such \u0027manually\nkeeping things in sync\u0027 tasks don\u0027t work too well.\nFrom my point of view, maintaining two build systems (in-tree\nand standalone build) is just burning developer time.\n\nHence, I clarified in the commit message that it only tackles\nthe in-tree build.",
      "parentUuid": "9efc9ac6_e4fd9a80",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "5981cc6bdb79efd105f62c99a16f4d080e3bea64",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9efc9ac6_e426bac2",
        "filename": "BUCK",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1012155
      },
      "writtenOn": "2015-06-25T16:57:47Z",
      "side": 1,
      "message": "I just wanted to repair the standalone build nonetheless.\nBut it currently (for me) failed with 15 unrelated errors.\nLike:\n\n  [...]/PutOwner.java:115: error: cannot find symbol\n          : Response.\u003cGroupInfo\u003e none();\n                      ^\n\nor\n\n  [...]/PutEmail.java:93: error: cannot find symbol\n        EmailInput in \u003d new EmailInput();\n        ^\n\n...\n\nSo it seems the standalone build got left behind some time\nago and would need more love than just adding commons-codec.",
      "parentUuid": "be423edc_bdda3f10",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "5981cc6bdb79efd105f62c99a16f4d080e3bea64",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7e11a608_53d10441",
        "filename": "BUCK",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-06-25T17:41:34Z",
      "side": 1,
      "message": "| So it seems the standalone build got left behind some time\n\nNo. The problem is Buck cache. lib/gerrit/BUCK doesn\u0027t mention sha1. That why it fetch wrong plugin-api that missing the version is needed by latst version of this plugin.\n\nWorkaround:\n\n* Pull latest gerrit master\n* buck build api_install\n* compute sha1 for plugin-api and plugin-gwtui\n* patch lib/gerrit/BUCK:\n\nIn my case:\n\n  maven_jar(\n    name \u003d \u0027plugin-api\u0027,\n    id \u003d \u0027com.google.gerrit:gerrit-plugin-api:\u0027 + VER,\n    sha1 \u003d \u00276f023f82ec1a82712cc2fcb34080481c1f851bb4\u0027,\n    attach_source \u003d False,\n    repository \u003d REPO,\n    license \u003d \u0027Apache2.0\u0027,\n  )\n  maven_jar(\n    name \u003d \u0027gwtui-api\u0027,\n    id \u003d \u0027com.google.gerrit:gerrit-plugin-gwtui:\u0027 + VER,\n    sha1 \u003d \u00273f6edca1acdb952812048b6029b5c68ba3020384\u0027,\n    attach_source \u003d False,\n    repository \u003d REPO,\n    license \u003d \u0027Apache2.0\u0027,\n  )\n\n* Observe that compiling now triggers downloading of new version of plugin api and is successful:\n\n  $ buck build plugin\n  Using buckd.\n  [-] PROCESSING BUCK FILES...FINISHED 0,2s\n  [-] BUILDING...FINISHED 13,7s (44/44 JOBS)\n  Log:\n  Download file:///home/davido/.m2/repository/com/google/gerrit/\n  gerrit-plugin-gwtui/2.12-SNAPSHOT/gerrit-plugin-gwtui-2.12-SNAPSHOT.jar\n  Download file:///home/davido/.m2/repository/com/google/gerrit/\n  gerrit-plugin-api/2.12-SNAPSHOT/gerrit-plugin-api-2.12-SNAPSHOT.jar",
      "parentUuid": "9efc9ac6_e426bac2",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "5981cc6bdb79efd105f62c99a16f4d080e3bea64",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5eaea2fa_32ca908f",
        "filename": "BUCK",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1012155
      },
      "writtenOn": "2015-06-25T18:05:29Z",
      "side": 1,
      "message": "\u003e Pull latest gerrit master\n\nDoesn\u0027t that kills the \"standalone\" in \"standalone build\"?\n;-)\n\nI know that you need this just to work around \"other issues\".\nBut those \"other issues\" are real.\nThey make the \"standalone build\" not any faster, and not any\nmore convenient than \"in-tree build\".\n\nOn the contrary ... in fact ... the steps you described\nabove contain more manual work than in-tree build. :-(\n\nAs nice as standalone building would be. For me,\nthe surrounding environment for standalone building would\nneed more love before it\u0027s worth doing standalone builds.\nThey just break too often, and involve too much manual\nkeeping-in-sync.",
      "parentUuid": "7e11a608_53d10441",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "5981cc6bdb79efd105f62c99a16f4d080e3bea64",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7e11a608_d3dd1452",
        "filename": "BUCK",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-06-25T18:23:03Z",
      "side": 1,
      "message": "I have very strong impression that you are ignoring or mixing (?) the roles here.\n\nWhen you are messing around with SNAPSHOT versions you have developer role. What developer is doing and using:\n\n* Ant\n* Maven\n* Buck in tree\n* Buck standalone\n* Eclipse native compilation\n* manually javac invocation\n* gradles\n\n  NOBODY CARES!!!\n\nPlease read carefully what I just said and reassure you understand it and may be re-read until you really understand, as it\u0027s getting annoying your blame on standalone Buck build mode.\n\nStandalone build mode was invented for users of plugins tole and not (!) fo developers! Wonna see it in action: [1]?\n\n  git clone --recursive https://github.com/davido/gerrit-oauth-provider.git\n  cd gerrit-oauth-provider \u0026\u0026 buck build plugin\n  cp buck-out/gen/gerrit-oauth-provider.jar $gerrit_site/plugins\n\n* [1] https://github.com/davido/gerrit-oauth-provider",
      "parentUuid": "5eaea2fa_32ca908f",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 7
      },
      "revId": "5981cc6bdb79efd105f62c99a16f4d080e3bea64",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}